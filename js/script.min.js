"use strict";let studentsData=[{id:111,firstName:"Маша",lastName:"Иванова",sex:"female",birthday:"1999-04-01",university:"УГАТУ",course:2,photo:"./img/arya.jpg",telephone:"79994561236",online:"2020-04-06T20:37",friendsNumber:124},{id:114,firstName:"Маргарита Анна-Лиза",lastName:"фон Гейзенберг",sex:"female",birthday:"1994-10-23",university:"УГАТУ",course:2,photo:"./img/cersei.jpg",telephone:"",online:"2020-04-07T08:03",friendsNumber:3489},{id:112,firstName:"Вавилен",lastName:"Татарский",sex:"male",university:"СурГУ",course:3,photo:"./img/cold_king.jpg",telephone:"79965875056",online:"2020-03-26T14:21",friendsNumber:56},{id:113,firstName:"Даниэль",lastName:"Риверо Падилья",sex:"male",birthday:"1991-12-18",university:"БГУ",course:4,photo:"./img/jon_snow.jpg",telephone:"79056655636",online:"now",friendsNumber:9},{id:115,firstName:"Миша",lastName:"Петров",sex:"male",birthday:"1997-05-11",university:"УрФУ",course:3,photo:"./img/ramsay.jpg",telephone:"",online:"now",friendsNumber:84},{id:116,firstName:"Ян",lastName:"Коган",sex:"male",birthday:"1994-07-19",university:"БГУ",course:4,photo:"./img/tyrion.jpg",telephone:"",online:"now",friendsNumber:267},{id:117,firstName:"Симон",lastName:"Гроф",sex:"female",birthday:"1998-11-15",university:"УГАТУ",course:2,photo:"./img/ygritte.jpg",telephone:"",online:"now",friendsNumber:84},{id:118,firstName:"Марат",lastName:"Сидоров",sex:"male",birthday:"1999-08-14",university:"СурГУ",course:3,photo:"./img/tormund.jpg",telephone:"",online:"now",friendsNumber:456}];class Student{constructor(e){this.id=e.id,this.firstName=e.firstName,this.lastName=e.lastName,this.sex=e.sex,this.birthday=e.birthday,this.university=e.university,this.course=e.course,this.photo=e.photo,this.telephone=e.telephone,this.online=e.online,this.friendsNumber=e.friendsNumber}get fullName(){return this.firstName+" "+this.lastName}get age(){let e=new Date,t=Date.parse(this.birthday);return Math.floor((e-t)/1e3/3600/24/365)}get yearsOld(){let e=this.age%10;return 1!=e?e>1&&e<5?`${this.age} года`:`${this.age} лет`:11!=e?`${this.age} год`:void 0}get status(){if("now"==this.online)return"Онлайн";let e,t=new Date(Date.parse(this.online)),s=t.getFullYear(),r=t.getMonth(),i=t.getDate(),a=t.getHours(),n=t.getMinutes();n=n>9?n:`0${n}`;let l=new Date;return l.getFullYear()!=s?e=`${i} ${getMonthName(r)} ${s}`:l.getMonth()!=r?e=`${i} ${getMonthName(r)} в ${a}:${n}`:l.getDate()==i?e=`сегодня в ${a}:${n}`:l.getDate()-i==1&&(e=`вчера в ${a}:${n}`),"male"==this.sex?`Был ${e}`:`Была ${e}`}}function getMonthName(e){switch(e){case 0:return"января";case 1:return"февраля";case 2:return"марта";case 3:return"апреля";case 4:return"мая";case 5:return"июня";case 6:return"июля";case 7:return"августа";case 8:return"сентября";case 9:return"октября";case 10:return"ноября";case 11:return"декабря"}}function renderStudent(e){let t=createEl("div");t.classList="student",t.dataset.id=e.id;let s=createEl("img");s.classList="student__img student__img_border-radius_50",s.src=e.photo,s.alt=e.fullName;let r=createEl("h3");r.classList="student__name",r.title=e.fullName,r.textContent=e.fullName;let i=createEl("p");return i.classList="student__description",i.title=`${e.university} ${e.course} курс`,i.textContent=`${e.university} ${e.course} курс`,t.append(s,r,i),document.querySelector(".students").append(t),t}function renderUser(e){let t=createEl("div");t.classList="user";let s=createEl("p");s.classList="user__status",s.title=e.status,s.textContent=e.status;let r=createEl("div");r.classList="user__close";let i=createEl("img");i.classList="close",i.alt="Закрыть",i.src="./img/close.svg";let a=createEl("h3");a.classList="user__name",a.title=e.fullName?e.fullName:"Неизвестно",a.textContent=e.fullName?e.fullName:"Неизвестно";let n=createEl("div");n.classList="user__info";let l=createEl("p");l.classList="user__attribute",l.textContent="День рождения";let o=new Date(Date.parse(e.birthday)),c=createEl("p");c.classList="user__data user__data_birthday",e.birthday?(c.title=`${o.getDate()} ${getMonthName(o.getMonth())}, ${e.yearsOld}`,c.textContent=`${o.getDate()} ${getMonthName(o.getMonth())}, ${e.yearsOld}`):(c.title="Неизвестен",c.textContent="Неизвестен");let u=createEl("p");u.classList="user__attribute",u.textContent="Телефон";let d=createEl("p");d.classList="user__data user__data_birthday",e.telephone?(d.title=`+${e.telephone.slice(0,1)} ${e.telephone.slice(1,4)} ${e.telephone.slice(4,7)} ${e.telephone.slice(7,9)} ${e.telephone.slice(9,11)}`,d.textContent=`+${e.telephone.slice(0,1)} ${e.telephone.slice(1,4)} ${e.telephone.slice(4,7)} ${e.telephone.slice(7,9)} ${e.telephone.slice(9,11)}`):(d.title="Неизвестен",d.textContent="Неизвестен");let h=createEl("div");h.classList="user__contact";let m=createEl("img");m.classList="user__message",m.alt="Написать сообщение",m.src="./img/message.svg";let p=createEl("a");p.classList="user__friends",p.href="#",p.textContent=`Друзей ${e.friendsNumber}`;let g=createEl("div");g.classList="friends";for(let e=0;e<4;e++){let t=createEl("a");t.classList="friends__item",t.href="#";let s=createEl("img");s.classList="friends__icon",s.alt=`friend${e}`,s.title=`friend${e}`,s.src=`./img/ava${e}.png`,t.append(s),g.append(t)}let f=createEl("img");return f.classList="user__avatar",f.alt=e.fullName,f.src=e.photo,h.append(m,p,g),n.append(l,c,u,d),r.append(i),t.append(s,r,a,n,h,f),t}function createEl(e){return document.createElement(e)}function showUser(e){let t=e.target;(t=t.closest(".student")).removeEventListener("click",showUser);let s=t.dataset.id,r=renderUser(students[s]);t.append(r),r.style.left="5px",r.style.top="5px",r.querySelector(".close").addEventListener("click",hideUser)}function hideUser(e){let t=e.target.closest(".user"),s=t.closest(".student");t.removeEventListener("click",hideUser),t.remove(),s.addEventListener("click",showUser)}let students={};for(let e of studentsData){let t=new Student(e);students[e.id]=t,(t=renderStudent(t)).addEventListener("click",showUser)}